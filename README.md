# âš•ï¸ COVID-19 X å…‰ç‰‡æ™ºèƒ½åˆ†ç±»ç³»ç»Ÿ


**ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„åŒé˜¶æ®µ COVID-19 èƒ¸éƒ¨ X å…‰ç‰‡åˆ†ç±»è§£å†³æ–¹æ¡ˆï¼Œé‡‡ç”¨å»å™ªè‡ªç¼–ç å™¨å’Œå·ç§¯ç¥ç»ç½‘ç»œæŠ€æœ¯ã€‚**

æ­¤é¡¹ç›®æ—¨åœ¨ä¸ºåŒ»ç–—ä¸“ä¸šäººå‘˜æä¾›ä¸€ä¸ªé«˜æ•ˆä¸”å‡†ç¡®çš„å·¥å…·ï¼Œç”¨äºè¾…åŠ©è¯Šæ–­ COVID-19ã€æ™®é€šç–¾ç—…ä»¥åŠç—…æ¯’æ€§è‚ºç‚ã€‚é€šè¿‡ç»“åˆè‡ªç¼–ç å™¨çš„å›¾åƒå¢å¼ºèƒ½åŠ›å’Œ CNN çš„å¼ºå¤§åˆ†ç±»æ€§èƒ½ï¼Œè¯¥ç³»ç»ŸåŠ›æ±‚åœ¨åŒ»å­¦å½±åƒåˆ†æé¢†åŸŸæä¾›å“è¶Šçš„æ€§èƒ½ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml         # âš™ï¸ é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â””â”€â”€ dataset.py         # ğŸ’¾ æ•°æ®é›†åŠ è½½ç±»
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ autoencoder.py     # ğŸ§  è‡ªç¼–ç å™¨æ¨¡å‹
â”‚   â””â”€â”€ simplecnn.py       # ğŸ”¬ CNNåˆ†ç±»æ¨¡å‹
â”œâ”€â”€ results/
â”‚   â”œâ”€â”€ autoencoder/       # ğŸ“Š è‡ªç¼–ç å™¨è®­ç»ƒç»“æœ
â”‚   â””â”€â”€ cnn/              # ğŸ“ˆ CNNè®­ç»ƒç»“æœ
â”œâ”€â”€ examples/             # ğŸ–¼ï¸ ç¤ºä¾‹å›¾ç‰‡
â”œâ”€â”€ utils.py             # ğŸ› ï¸ å·¥å…·å‡½æ•°
â”œâ”€â”€ main.py              # ğŸš€ è®­ç»ƒä¸»è„šæœ¬
â”œâ”€â”€ train_autoencoder.py # âš™ï¸ è‡ªç¼–ç å™¨è®­ç»ƒä»£ç 
â”œâ”€â”€ train_cnn.py        # âš™ï¸ CNNè®­ç»ƒä»£ç 
â”œâ”€â”€ inference.py        # ğŸ§ª æ¨¡å‹æ¨ç†è„šæœ¬
â”œâ”€â”€ gradio_app.py       # ğŸŒ Webç•Œé¢åº”ç”¨
â””â”€â”€ requirements.txt    # ğŸ“¦ é¡¹ç›®ä¾èµ–
```

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

1. **ğŸš€ åŒé˜¶æ®µæ™ºèƒ½å¤„ç†æµç¨‹**ï¼š
   - **å›¾åƒå»å™ªå¢å¼º**ï¼šåˆ©ç”¨è‡ªç¼–ç å™¨æœ‰æ•ˆå»é™¤ X å…‰ç‰‡ä¸­çš„å™ªå£°ï¼Œæå‡å›¾åƒè´¨é‡ã€‚
   - **ç²¾å‡†åˆ†ç±»**ï¼šé‡‡ç”¨å·ç§¯ç¥ç»ç½‘ç»œå¯¹å»å™ªåçš„å›¾åƒè¿›è¡Œåˆ†ç±»ï¼ŒåŒºåˆ† Covid-19ã€Normal å’Œ Viral Pneumonia ä¸‰ç§çŠ¶æ€ã€‚

2. **âš™ï¸ çµæ´»çš„è®­ç»ƒé…ç½®**ï¼š
   - **æ¨¡å—åŒ–è®­ç»ƒ**ï¼šæ”¯æŒç‹¬ç«‹è®­ç»ƒè‡ªç¼–ç å™¨æˆ– CNN æ¨¡å‹ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚ã€‚
   - **ä¸²è¡Œè®­ç»ƒ**ï¼šæ”¯æŒå…ˆè®­ç»ƒè‡ªç¼–ç å™¨ï¼Œå†å°†å…¶åº”ç”¨äº CNN çš„è®­ç»ƒæµç¨‹ã€‚
   - **å‚æ•°å¯å®šåˆ¶**ï¼šä¸ºæ¯ä¸ªæ¨¡å‹æä¾›ç‹¬ç«‹çš„è®­ç»ƒå‚æ•°é…ç½®ï¼Œç²¾ç»†åŒ–æ§åˆ¶è®­ç»ƒè¿‡ç¨‹ã€‚

3. **ğŸ“Š å¯è§†åŒ–ä¸ç›‘æ§**ï¼š
   - **TensorBoard é›†æˆ**ï¼šå®æ—¶è·Ÿè¸ªè®­ç»ƒè¿‡ç¨‹ä¸­çš„å„é¡¹æŒ‡æ ‡ï¼Œå¦‚æŸå¤±å’Œå‡†ç¡®ç‡ã€‚
   - **æ€§èƒ½å¯è§†åŒ–**ï¼šæ¸…æ™°å±•ç¤ºæ¨¡å‹åœ¨è®­ç»ƒå’ŒéªŒè¯é›†ä¸Šçš„æ€§èƒ½è¡¨ç°ã€‚
   - **æ··æ·†çŸ©é˜µåˆ†æ**ï¼šç›´è§‚å±•ç¤ºæ¨¡å‹åˆ†ç±»ç»“æœï¼Œä¾¿äºè¯¯å·®åˆ†æå’Œæ¨¡å‹ä¼˜åŒ–ã€‚

4. **ğŸŒ ç”¨æˆ·å‹å¥½çš„ Web ç•Œé¢**ï¼š
   - **äº¤äº’å¼æ“ä½œ**ï¼šé€šè¿‡ç®€å•çš„ Web ç•Œé¢ä¸Šä¼  X å…‰ç‰‡è¿›è¡Œé¢„æµ‹ã€‚
   - **å®æ—¶å¤„ç†åé¦ˆ**ï¼šå±•ç¤ºå›¾åƒå¤„ç†å’Œé¢„æµ‹çš„ä¸­é—´è¿‡ç¨‹ã€‚
   - **æ¸…æ™°ç»“æœå‘ˆç°**ï¼šç›´è§‚æ˜¾ç¤ºé¢„æµ‹ç»“æœåŠå…¶ç½®ä¿¡åº¦ã€‚

## ğŸ› ï¸ å®‰è£…æŒ‡å—

1. **å…‹éš†ä»“åº“**ï¼š

   ```bash
   git clone https://github.com/yourusername/covid19-xray-classification.git
   cd covid19-xray-classification
   ```

2. **åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**ï¼š

   ```bash
   conda create -n covid python=3.10
   conda activate covid
   ```

3. **å®‰è£…ä¾èµ–**ï¼š

   ```bash
   pip install -r requirements.txt
   ```

## ğŸ¬ ä½¿ç”¨æ–¹æ³•

## ğŸ—‚ï¸ æ•°æ®é›†è¦æ±‚

ä¸ºäº†ä¿è¯æ¨¡å‹çš„æœ‰æ•ˆè®­ç»ƒï¼Œè¯·ç¡®ä¿æ•°æ®é›†ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
dataset/
â”œâ”€â”€ train/
â”‚   â”œâ”€â”€ Covid/
â”‚   â”œâ”€â”€ Normal/
â”‚   â””â”€â”€ Viral Pneumonia/
â””â”€â”€ noisy_test/
    â”œâ”€â”€ Covid/
    â”œâ”€â”€ Normal/
    â””â”€â”€ Viral Pneumonia/
```

æ¯ä¸ªå­æ–‡ä»¶å¤¹ä¸­åŒ…å«å¯¹åº”ç±»åˆ«çš„èƒ¸éƒ¨ X å…‰ç‰‡å›¾åƒã€‚è®­ç»ƒå®Œæ¯•çš„æ¨¡å‹é»˜è®¤å­˜äº**result/{autoencoder, cnn}/checkpoints/best_model.pth**ä¸­

### 1. ğŸ‹ï¸â€â™€ï¸ è®­ç»ƒæ¨¡å‹

**å•ç‹¬è®­ç»ƒè‡ªç¼–ç å™¨**ï¼š

```bash
python main.py \
    --data_dir /path/to/your/dataset \
    --train_autoencoder \
    --ae_epochs 100 \
    --ae_batch_size 32 \
    --ae_lr 0.001
```

**å•ç‹¬è®­ç»ƒ CNN**ï¼š

```bash
python main.py \
    --data_dir /path/to/your/dataset \
    --train_cnn \
    --autoencoder_dir /path/to/your/ae_model.pth \
    --cnn_epochs 100 \
    --cnn_batch_size 32 \
    --cnn_lr 0.001 \
    --noise_factor 0.3 
```

**è¿ç»­è®­ç»ƒä»å¤´ä¸¤ä¸ªæ¨¡å‹**ï¼š

```bash
python main.py \
    --train_autoencoder \
    --train_cnn \
    --ae_epochs 100 \
    --ae_batch_size 32 \
    --ae_lr 0.001 \
    --cnn_epochs 50 \
    --cnn_batch_size 64 \
    --cnn_lr 0.0001 \
    --noise_factor 0.3
```

### 2. ğŸŒ å¯åŠ¨ Web ç•Œé¢

```bash
python gradio_app.py \
    --autoencoder_path /path/to/your/ae_pretrained.pth \
    --cnn_path /path/to/your/cnn_pretrained.pth \
    --port 7860
```

è®¿é—® `http://localhost:7860` åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ Web ç•Œé¢ã€‚

**æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œæ¨ç†**

```bash
python inference.py \
    --autoencoder_path /path/to/your/ae_pretrained.pth \
    --cnn_path /path/to/your/cnn_pretrained.pth \
    --image_path test_image.jpeg \
    --config config/config.yaml \
    --device cuda
```

### 3. ğŸ“Š æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹

```bash
tensorboard --logdir results/autoencoder/tensorboard  # æŸ¥çœ‹è‡ªç¼–ç å™¨

tensorboard --logdir results/cnn/tensorboard  # æŸ¥çœ‹CNN

tensorboard --logdir_spec autoencoder:results/autoencoder/tensorboard,cnn:results/cnn/tensorboard # åŒæ—¶æŸ¥çœ‹ä¸¤ä¸ªè®­ç»ƒè¿‡ç¨‹
```

## âš™ï¸ é…ç½®æ–‡ä»¶

å¯ä»¥åœ¨ `config/config.yaml` æ–‡ä»¶ä¸­è‡ªå®šä¹‰è®­ç»ƒå‚æ•°ï¼Œä¾‹å¦‚ï¼š

```yaml
training:
  autoencoder:
    num_epochs: 100
    batch_size: 32
    learning_rate: 0.001
  cnn:
    num_epochs: 50
    batch_size: 64
    learning_rate: 0.0001
```

ä¸€ä¸ªå¯èƒ½çš„ç¤ºä¾‹: å°†æ•°æ®é›†æ”¾å…¥ä¸main.pyåŒçº§ä¸‹:
```bash
project/
â”œâ”€â”€ covid19  # æ•°æ®é›†æ–‡ä»¶å¤¹
    â”œâ”€â”€ train/
        â”œâ”€â”€ Covid/
        â”œâ”€â”€ Normal/
        â””â”€â”€ Viral Pneumonia/
    â””â”€â”€ noisy_test/
        â”œâ”€â”€ Covid/
        â”œâ”€â”€ Normal/
        â””â”€â”€ Viral Pneumonia/
â”œâ”€â”€ main.py
â”œâ”€â”€ inference.py
â”œâ”€â”€ ...

# åªè®­ç»ƒAutoEncoder
python main.py \
    --data_dir covid19 \
    --train_autoencoder \
    --ae_epochs 100 \
    --ae_batch_size 32 \
    --ae_lr 0.001

# åªè®­ç»ƒCNNï¼ˆéœ€è¦å…ˆæœ‰è®­ç»ƒå¥½çš„è‡ªç¼–ç å™¨ï¼‰ï¼š
python main.py \
    --data_dir covid19 \
    --train_cnn \
    --autoencoder_dir results/autoencoder/checkpoints/best_model.pth \
    --cnn_epochs 100 \
    --cnn_batch_size 32 \
    --cnn_lr 0.001 \
    --noise_factor 0.3 

# è¿ç»­è®­ç»ƒä¸¤ä¸ªæ¨¡å‹ï¼š
python main.py \
    --train_autoencoder \
    --train_cnn \
    --ae_epochs 100 \
    --ae_batch_size 32 \
    --ae_lr 0.001 \
    --cnn_epochs 50 \
    --cnn_batch_size 64 \
    --cnn_lr 0.0001 \
    --noise_factor 0.3

# è¿è¡ŒGradioå‰ç«¯
python gradio_app.py \
    --autoencoder_path results/autoencoder/checkpoints/best_model.pth \
    --cnn_path results/cnn/checkpoints/best_model.pth \
    --port 7860
```

## ğŸ§  æ¨¡å‹æ¶æ„

1. **å»å™ªè‡ªç¼–ç å™¨**ï¼š
   - **ç¼–ç å™¨**ï¼šåˆ©ç”¨å·ç§¯å±‚æå–è¾“å…¥å›¾åƒçš„æ·±å±‚ç‰¹å¾ã€‚
   - **è§£ç å™¨**ï¼šé€šè¿‡åå·ç§¯å±‚é‡å»ºå»å™ªåçš„å›¾åƒï¼Œå­¦ä¹ æœ‰æ•ˆçš„ç‰¹å¾è¡¨ç¤ºã€‚
   - **ç›®æ ‡**ï¼šå‡å°‘å›¾åƒå™ªå£°ï¼Œæå‡åç»­ CNN æ¨¡å‹çš„åˆ†ç±»æ€§èƒ½ã€‚

2. **å·ç§¯ç¥ç»ç½‘ç»œåˆ†ç±»å™¨**ï¼š
   - **å¤šå±‚å·ç§¯å±‚**ï¼šæå–å›¾åƒä¸­çš„å±€éƒ¨å’Œå…¨å±€ç‰¹å¾ã€‚
   - **å…¨è¿æ¥å±‚**ï¼šå°†æå–çš„ç‰¹å¾æ˜ å°„åˆ°ç±»åˆ«æ¦‚ç‡ã€‚
   - **è¾“å‡ºå±‚**ï¼šè¾“å‡º Covid-19ã€Normal å’Œ Viral Pneumonia ä¸‰ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ã€‚

## ğŸ“ˆ ç»“æœå±•ç¤º

æˆ‘ä»¬å°†åœ¨ `results/` ç›®å½•ä¸‹å­˜å‚¨è®­ç»ƒç»“æœï¼ŒåŒ…æ‹¬ï¼š

1. **åˆ†ç±»å‡†ç¡®ç‡**ï¼šè¯„ä¼°æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„æ•´ä½“åˆ†ç±»æ€§èƒ½ã€‚
2. **æ··æ·†çŸ©é˜µ**ï¼šå¯è§†åŒ–æ¨¡å‹åœ¨ä¸åŒç±»åˆ«ä¸Šçš„åˆ†ç±»æƒ…å†µï¼Œåˆ†æé”™è¯¯ç±»å‹ã€‚
3. **ROC æ›²çº¿**ï¼šè¯„ä¼°æ¨¡å‹åœ¨ä¸åŒé˜ˆå€¼ä¸‹çš„çœŸé˜³æ€§ç‡å’Œå‡é˜³æ€§ç‡ã€‚
4. **ç¤ºä¾‹é¢„æµ‹ç»“æœ**ï¼šå±•ç¤ºæ¨¡å‹åœ¨ä¸€äº›å…¸å‹æ ·æœ¬ä¸Šçš„é¢„æµ‹æ•ˆæœã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¡¬ä»¶è¦æ±‚**ï¼šå»ºè®®ä½¿ç”¨é…å¤‡ GPU çš„ç¯å¢ƒè¿›è¡Œè®­ç»ƒï¼Œä»¥åŠ é€Ÿè®¡ç®—è¿‡ç¨‹ã€‚
2. **æ•°æ®é¢„å¤„ç†**ï¼šç¡®ä¿è¾“å…¥æ¨¡å‹çš„å›¾åƒå·²ç»è¿‡é€‚å½“çš„æ ‡å‡†åŒ–å¤„ç†ã€‚
3. **è¶…å‚æ•°è°ƒä¼˜**ï¼šä½¿ç”¨éªŒè¯é›†è¿›è¡Œè¶…å‚æ•°è°ƒæ•´ï¼Œä»¥è·å¾—æœ€ä½³æ¨¡å‹æ€§èƒ½ã€‚
4. **æ¨¡å‹ä¿å­˜**ï¼šå®šæœŸä¿å­˜æ¨¡å‹æ£€æŸ¥ç‚¹ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒä¸­æ–­åæ¢å¤æˆ–ç”¨äºåç»­éƒ¨ç½²ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºçš„è´¡çŒ®ï¼å¦‚æœæ‚¨æƒ³ä¸ºæ­¤é¡¹ç›®åšå‡ºè´¡çŒ®ï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **Fork ä»“åº“**ï¼šåœ¨ GitHub ä¸Š Fork è¯¥ä»“åº“ã€‚
2. **åˆ›å»ºæ–°åˆ†æ”¯**ï¼š`git checkout -b feature/your-feature`
3. **æäº¤æ›´æ”¹**ï¼š`git commit -m 'Add your feature'`
4. **æ¨é€åˆ†æ”¯**ï¼š`git push origin feature/your-feature`
5. **å‘èµ· Pull Request**ï¼šæäº¤æ‚¨çš„ Pull Request ä»¥ä¾›å®¡æ ¸ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE)ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

- **ä½œè€…**ï¼š[Guangzhao Li]
- **é‚®ç®±**ï¼š[gzhao.cs@gmail.com]
- **GitHub**ï¼š[@Your GitHub Profile](https://github.com/guangzhaoli)

---

**è®©æˆ‘ä»¬ä¸€èµ·åˆ©ç”¨ AI æŠ€æœ¯ï¼Œä¸ºæŠ—å‡»ç–«æƒ…è´¡çŒ®åŠ›é‡ï¼**